{"version":3,"sources":["propertyFields/number/PropertyFieldNumberHost.tsx"],"names":[],"mappings":"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","file":"propertyFields/number/PropertyFieldNumberHost.js","sourcesContent":["import * as React from 'react';\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\nimport { IPropertyFieldNumberHostProps, IPropertyFieldNumberHostState } from './IPropertyFieldNumberHost';\nimport * as telemetry from '../../common/telemetry';\nimport { Async } from 'office-ui-fabric-react/lib/Utilities';\nimport * as strings from 'PropertyControlStrings';\n\nexport default class PropertyFieldNumberHost extends React.Component<IPropertyFieldNumberHostProps, IPropertyFieldNumberHostState> {\n  private _async: Async;\n  private _delayedChange: (value: string) => void;\n\n  constructor(props: IPropertyFieldNumberHostProps) {\n    super(props);\n\n    telemetry.track('PropertyFieldNumber', {\n      disabled: props.disabled\n    });\n\n    this.state = {\n      value: this.props.value ? this.props.value.toString() : null\n    };\n\n    this._async = new Async(this);\n    this._delayedChange = this._async.debounce(this._onChanged, this.props.deferredValidationTime ? this.props.deferredValidationTime : 200);\n  }\n\n  /**\n   * componentDidUpdate lifecycle hook\n   *\n   * @param prevProps\n   * @param prevState\n   */\n  public componentDidUpdate(prevProps: IPropertyFieldNumberHostProps, prevState: IPropertyFieldNumberHostState): void {\n    if (prevProps.value !== this.props.value) {\n      this.setState({\n        value: this.props.value ? this.props.value.toString() : null\n      });\n    }\n  }\n\n  /**\n   * Validate if field value is a number\n   * @param value\n   */\n  private _validateNumber = (value: string): string | Promise<string> => {\n    if (isNaN(Number(value))) {\n      return `${strings.NotNumberValidationMessage} ${value}.`;\n    }\n\n    const nrValue = parseInt(value);\n    // Check if number is lower or equal to minimum value\n    if (this.props.minValue && nrValue < this.props.minValue) {\n      return `${strings.MinimumNumberValidationMessage} ${this.props.minValue}`;\n    }\n    // Check if the number is greater than the maximum value\n    if (this.props.maxValue && nrValue > this.props.maxValue) {\n      return `${strings.MaximumNumberValidationMessage} ${this.props.maxValue}`;\n    }\n\n    if (this.props.onGetErrorMessage) {\n      return this.props.onGetErrorMessage(nrValue);\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * On field change event handler\n   */\n  private _onChanged = (value: string): void => {\n    // Update state\n    this.setState({\n      value\n    });\n\n    if (!isNaN(Number(value))) {\n      const nrValue = parseInt(value);\n      if ((!this.props.minValue || nrValue >= this.props.minValue) && (!this.props.maxValue || nrValue <= this.props.maxValue)) {\n        // Trigger change for the web part\n        this.props.onChanged(nrValue);\n      }\n    }\n  }\n\n  /**\n   * Render field\n   */\n  public render(): JSX.Element {\n    return (\n      <div>\n        <TextField label={this.props.label}\n                   ariaLabel={this.props.ariaLabel}\n                   onChanged={this._delayedChange}\n                   value={this.state.value}\n                   description={this.props.description}\n                   placeholder={this.props.placeholder}\n                   errorMessage={this.props.errorMessage}\n                   onGetErrorMessage={this._validateNumber}\n                   deferredValidationTime={this.props.deferredValidationTime}\n                   disabled={this.props.disabled} />\n      </div>\n    );\n  }\n}\n"],"sourceRoot":"../../../src"}