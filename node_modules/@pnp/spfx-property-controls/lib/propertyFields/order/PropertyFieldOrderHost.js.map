{"version":3,"sources":["propertyFields/order/PropertyFieldOrderHost.tsx"],"names":[],"mappings":"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","file":"propertyFields/order/PropertyFieldOrderHost.js","sourcesContent":["import { IButtonStyles, IconButton } from 'office-ui-fabric-react/lib/Button';\nimport { Selection } from 'office-ui-fabric-react/lib/DetailsList';\nimport { Label } from 'office-ui-fabric-react/lib/Label';\nimport { DragDropHelper } from 'office-ui-fabric-react/lib/utilities/dragdrop';\nimport { IDragDropContext } from 'office-ui-fabric-react/lib/utilities/dragdrop/interfaces';\nimport * as React from 'react';\n\nimport * as telemetry from '../../common/telemetry';\nimport { IPropertyFieldOrderHostProps, IPropertyFieldOrderHostState } from './IPropertyFieldOrderHost';\nimport styles from './PropertyFieldOrderHost.module.scss';\nimport { isEqual } from '@microsoft/sp-lodash-subset';\nimport { EventGroup } from '@uifabric/utilities/lib/EventGroup';\n\nexport default class PropertyFieldOrderHost extends React.Component<IPropertyFieldOrderHostProps, IPropertyFieldOrderHostState> {\n\n\tprivate _draggedItem: any;\n\tprivate _selection: Selection;\n\tprivate _ddHelper: DragDropHelper;\n\tprivate _refs: Array<HTMLElement>;\n\tprivate _ddSubs: Array<any>;\n\tprivate _lastBox: HTMLElement;\n\n\tconstructor(props: IPropertyFieldOrderHostProps, state: IPropertyFieldOrderHostState) {\n    super(props);\n\n\t\ttelemetry.track('PropertyFieldOrder', {\n\t\t\tdisabled: props.disabled\n\t\t});\n\n\t\tthis._selection = null;\n\n\t\tthis._ddHelper = new DragDropHelper({\n\t\t\tselection: this._selection\n\t\t});\n\n\t\tthis._refs = new Array<HTMLElement>();\n\t\tthis._ddSubs = new Array<any>();\n\n\t\tthis._draggedItem = null;\n\n\t\tthis.state = {\n\t\t\titems: []\n\t\t};\n  }\n\n\tpublic render(): JSX.Element {\n    const {\n      items\n    } = this.state;\n\t\treturn (\n\t\t\t<div className={styles.propertyFieldOrder}>\n\t\t\t\t{this.props.label && <Label>{this.props.label}</Label>}\n\t\t\t\t<ul style={{maxHeight: this.props.maxHeight ? this.props.maxHeight + 'px' : '100%'}} className={!this.props.disabled ? styles.enabled : styles.disabled}>\n          {\n            (items && items.length > 0) && (\n              items.map((value:any, index:number) => {\n                return (\n                  <li\n                    ref={this.registerRef}\n                    key={index}\n                    draggable={!this.props.disableDragAndDrop && !this.props.disabled}\n                    style={{cursor: !this.props.disableDragAndDrop && !this.props.disabled ? 'pointer' : 'default'}}\n                  >{this.renderItem(value,index)}</li>\n                );\n              })\n            )\n          }\n\t\t\t\t\t{\n            (items && items.length > 0) && <div className={styles.lastBox} ref={(ref:HTMLElement) => {this._lastBox = ref;}}/>\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderItem(item:any, index:number): JSX.Element {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={styles.itemBox}>\n\t\t\t\t\t{this.renderDisplayValue(item,index)}\n\t\t\t\t</div>\n\t\t\t\t{!this.props.removeArrows &&\n\t\t\t\t\t<div>{this.renderArrows(index)}</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderDisplayValue(item:any, index:number): JSX.Element {\n\t\tif(typeof this.props.onRenderItem === \"function\") {\n\t\t\treturn this.props.onRenderItem(item, index);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<span>{this.props.textProperty ? item[this.props.textProperty] : item.toString()}</span>\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate renderArrows(index:number): JSX.Element {\n\t\tlet arrowButtonStyles: Partial<IButtonStyles> = {\n\t\t\troot: {\n\t\t\t\twidth: '14px',\n\t\t\t\theight: '100%',\n\t\t\t\tdisplay: 'inline-block !important'\n\t\t\t},\n\t\t\trootDisabled: {\n\t\t\t\tbackgroundColor: 'transparent'\n\t\t\t},\n\t\t\ticon: {\n\t\t\t\tfontSize: \"10px\"\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={this.props.disabled || index === 0}\n\t\t\t\t\ticonProps={{iconName: this.props.moveUpIconName}}\n\t\t\t\t\tonClick={() => {this.onMoveUpClick(index);}}\n\t\t\t\t\tstyles={arrowButtonStyles}\n\t\t\t\t/>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={this.props.disabled || index === this.props.items.length - 1}\n\t\t\t\t\ticonProps={{iconName: this.props.moveDownIconName}}\n\t\t\t\t\tonClick={() => {this.onMoveDownClick(index);}}\n\t\t\t\t\tstyles={arrowButtonStyles}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n  }\n\n  public componentWillMount(): void {\n    this.setState({\n      items: this.props.items || []\n    });\n  }\n\n\tpublic componentDidMount(): void {\n\t\tthis.setupSubscriptions();\n\t}\n\n  public componentWillUpdate(nextProps: IPropertyFieldOrderHostProps): void {\n    // Check if the provided items are still the same\n    if (!isEqual(nextProps.items, this.state.items)) {\n      this.setState({\n        items: this.props.items || []\n      });\n    }\n  }\n\n\tpublic componentDidUpdate(): void {\n\t\tthis.cleanupSubscriptions();\n\t\tthis.setupSubscriptions();\n  }\n\n\tpublic componentWillUnmount(): void {\n\t\tthis.cleanupSubscriptions();\n\t}\n\n\tprivate registerRef = (ref:HTMLElement): void => {\n\t\tthis._refs.push(ref);\n\t}\n\n\tprivate setupSubscriptions = (): void => {\n\t\tif(!this.props.disableDragAndDrop && !this.props.disabled) {\n\t\t\tthis._refs.forEach((value:HTMLElement, index:number) => {\n\t\t\t\tthis._ddSubs.push(this._ddHelper.subscribe(value, new EventGroup(value), {\n\t\t\t\t\teventMap: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallback: (context:IDragDropContext, event?:any) => {\n\t\t\t\t\t\t\t\tthis._draggedItem = context.data;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\teventName: 'dragstart'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tselectionIndex: index,\n\t\t\t\t\tcontext: {data: this.state.items[index], index: index},\n\t\t\t\t\tupdateDropState: (isDropping: boolean, event: DragEvent) => {\n\t\t\t\t\t\tif(isDropping) {\n\t\t\t\t\t\t\tvalue.classList.add(styles.dragEnter);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalue.classList.remove(styles.dragEnter);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcanDrop: (dropContext?: IDragDropContext, dragContext?: IDragDropContext) => {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tcanDrag: (item?: any) => {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tonDrop: (item?: any, event?: DragEvent) => {\n\t\t\t\t\t\tif (this._draggedItem) {\n\t\t\t\t\t\t\tthis.insertBeforeItem(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t/*onDragStart: (item?: any, itemIndex?: number, selectedItems?: any[], event?: MouseEvent) => {\n\t\t\t\t\t\t//Never called for some reason, so using eventMap above\n\t\t\t\t\t\tthis._draggedItem = item;\n\t\t\t\t\t},*/\n\t\t\t\t\tonDragEnd: (item?: any, event?: DragEvent) => {\n\t\t\t\t\t\tthis._draggedItem = null;\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\t//Create dropable area below list to allow items to be dragged to the bottom\n\t\t\tif(this._refs.length && typeof this._lastBox !== \"undefined\") {\n\t\t\t\tthis._ddSubs.push(this._ddHelper.subscribe(this._lastBox, new EventGroup(this._lastBox), {\n\t\t\t\t\tselectionIndex: this._refs.length,\n\t\t\t\t\tcontext: {data: {}, index: this._refs.length},\n\t\t\t\t\tupdateDropState: (isDropping: boolean, event: DragEvent) => {\n\t\t\t\t\t\tif(isDropping) {\n\t\t\t\t\t\t\tthis._refs[this._refs.length-1].classList.add(styles.dragLast);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._refs[this._refs.length-1].classList.remove(styles.dragLast);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcanDrop: (dropContext?: IDragDropContext, dragContext?: IDragDropContext) => {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tonDrop: (item?: any, event?: DragEvent) => {\n\t\t\t\t\t\tif (this._draggedItem) {\n\t\t\t\t\t\t\tlet itemIndex:number = this.state.items.indexOf(this._draggedItem);\n\t\t\t\t\t\t\tthis.moveItemAtIndexToTargetIndex(itemIndex,this.state.items.length-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate cleanupSubscriptions = (): void => {\n\t\twhile(this._ddSubs.length){\n\t\t\tlet sub:any = this._ddSubs.pop();\n\t\t\tsub.dispose();\n\t\t}\n\t}\n\n\tprivate insertBeforeItem = (item: any) => {\n\t\tlet itemIndex:number = this.state.items.indexOf(this._draggedItem);\n\t\tlet targetIndex:number = this.state.items.indexOf(item);\n\t\tif(itemIndex < targetIndex) {\n\t\t\ttargetIndex -= 1;\n\t\t}\n\t\tthis.moveItemAtIndexToTargetIndex(itemIndex,targetIndex);\n\t}\n\n\n\tprivate onMoveUpClick = (itemIndex:number): void => {\n\t\tif(itemIndex > 0) {\n\t\t\tthis.moveItemAtIndexToTargetIndex(itemIndex, itemIndex-1);\n\t\t}\n\t}\n\n\tprivate onMoveDownClick = (itemIndex:number): void => {\n\t\tif(itemIndex < this.state.items.length-1) {\n\t\t\tthis.moveItemAtIndexToTargetIndex(itemIndex, itemIndex+1);\n\t\t}\n\t}\n\n\tprivate moveItemAtIndexToTargetIndex = (itemIndex:number, targetIndex:number): void => {\n\t\tif(itemIndex !== targetIndex && itemIndex > -1 && targetIndex > -1 && itemIndex < this.state.items.length && targetIndex < this.state.items.length) {\n\t\t\tlet items: Array<any> = this.state.items;\n\t\t\titems.splice(targetIndex, 0, ...items.splice(itemIndex, 1)[0]);\n\n\t\t\tthis.setState({\n\t\t\t\titems: items\n\t\t\t});\n\n\t\t\tthis.props.valueChanged(items);\n\t\t}\n\t}\n}\n"],"sourceRoot":"../../../src"}